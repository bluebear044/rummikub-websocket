<html>
  <head>
    <style>
      body {
        font-family: "Helvetica Neue", helvetica, arial;
        padding: 15px;
      }

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
        border: 1px solid #90bade;
      }

      ul li {
        line-height: 1.4;
      }

      div#nav ul
      {
        width: 200px;
        height: 350px;
        overflow: auto;
      }

      
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

    <script>

      $( document ).ready(function() {
        console.log( "ready!" );

          var host = location.origin.replace(/^http/, 'ws')
      		//var host = "ws://desolate-wave-36629.herokuapp.com/";
          //var host = "ws://127.0.0.1:5000";

          var ws = new WebSocket(host);

          $( "#sendBtn" ).click(function() {
            sendMessage(ws);
          });

          $( "#msg" ).keypress(function(e) {
            if(e.keyCode == 13) {
              sendMessage(ws);
            }
          });

          ws.onmessage = function (event) {

           console.log("message received : " + event.data);

           var li = document.createElement('li');
           li.innerHTML = JSON.parse(event.data);
           document.querySelector('#chats').appendChild(li);

           $("#chats").animate({ scrollTop: $(document).height() }, "slow");
           return false;
         };
       });

      function sendMessage(ws) {
       var msg = $( "#msg" ).val();
       console.log(msg);
       ws.send(msg);
       $( "#msg" ).val("");
     }
	      
    </script>
  </head>
  <body>
    <h1>Chats</h1>

    <div id="nav">
      <ul id="chats">
      </ul>
    </div>
    
    <input type="text" id="msg" />
    <input id="sendBtn" type="button" value="send" />
  </body>
</html>
